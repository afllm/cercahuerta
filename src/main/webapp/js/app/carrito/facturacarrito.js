
'use strict'
//http://localhost:8081/json?ob=usuario&op=login&user=ddd&pass=pass
moduleFactura.controller('facturaCarritoController', ['$scope', '$http', '$location', 'toolService', '$routeParams', 'sessionService',
    function ($scope, $http, $location, toolService, $routeParams, sessionService) {

        if (!$routeParams.id) {
            $scope.id = 1;
        } else {
            $scope.id = $routeParams.id;
        }

        $scope.miFormato = function (valor) {
            return isNaN(valor) ? valor : parseFloat(valor).toFixed(2);
        }
//       if (sessionService.getUserName() !== "") {
//            $scope.loggeduser = sessionService.getUserName();
//            $scope.loggeduserid = sessionService.getId();
//            $scope.logged = true;
//            $scope.tipousuarioID = sessionService.getTypeUserID();
//        }

        $scope.isActive = toolService.isActive;

        $http({
            method: 'GET',
            url: 'json?ob=linea&op=getpagex&rpp=10&page=1&idajena=' + $scope.id
        }).then(function (response) {
            $scope.status = response.status;
            $scope.ajaxDataUsuarios = response.data.message;
            var cant = 0;
            var precio = 0;
            var iva = 0;
            var acum = 0;
            $scope.total = null;

            if (response.data.message.length !== null) {
                for (var i = 0; i < response.data.message.length; i++) {
                    cant = response.data.message[i].cantidad;
                    precio = response.data.message[i].obj_Producto.precio;
                    iva = response.data.message[i].obj_Factura.iva;
                    acum = acum + ((((iva / 100) * precio) + precio) * cant);
                    $scope.total = acum;
                }
            }

        }, function (response) {
            $scope.status = response.status;
            $scope.ajaxDataUsuarios = response.data.message || 'Request failed';
        });


        $scope.volver = function () {
            $location.url(`carrito/plist/`);
        }

        $scope.pdf = function () {
            var usuario;
            var fecha;
            var lineasTotales;
            var iva;
            var dni;
            var length = $scope.ajaxDataUsuarios.length;
            console.log(length);
            var doc = new jsPDF();
            for (var i = 0; i < length; i++) {
                console.log($scope.ajaxDataUsuarios[i]);
//                if ($scope.ajaxDataUsuarios[i].id === $scope.id) {
                usuario = $scope.ajaxDataUsuarios[i].obj_Factura.obj_Usuario.nombre + ' ' + $scope.ajaxDataUsuarios[i].obj_Factura.obj_Usuario.ape1 + ' ' + $scope.ajaxDataUsuarios[i].obj_Factura.obj_Usuario.ape2;
                fecha = $scope.ajaxDataUsuarios[i].obj_Factura.fecha;
                lineasTotales = $scope.ajaxDataUsuarios[i].obj_Factura.link_linea;
                iva = $scope.ajaxDataUsuarios[i].obj_Factura.iva;
                dni = $scope.ajaxDataUsuarios[i].obj_Factura.obj_Usuario.dni;
//                }
            }
            ;


            $http({
                method: 'GET',
                url: 'json?ob=linea&op=getpagex&rpp=10000&page=1&idajena=' + $scope.id


            }).then(function (response) {
                $scope.status = response.status;
                $scope.ajaxLineasFactura = response.data.message;
                console.log($scope.ajaxLineasFactura);
                var imgData = 'data:image/png;base64,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/GMzLdsAADzaaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzExMSA3OS4xNTgzMjUsIDIwMTUvMDkvMTAtMDE6MTA6MjAgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgICAgICAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChXaW5kb3dzKTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxNy0xMC0xMFQxMzoxMToxOCswNTozMDwveG1wOkNyZWF0ZURhdGU+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE3LTEwLTEwVDE4OjQyOjU5KzA1OjMwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNy0xMC0xMFQxODo0Mjo1OSswNTozMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgICAgPHBob3Rvc2hvcDpDb2xvck1vZGU+MzwvcGhvdG9zaG9wOkNvbG9yTW9kZT4KICAgICAgICAgPHBob3Rvc2hvcDpJQ0NQcm9maWxlPnNSR0IgSUVDNjE5NjYtMi4xPC9waG90b3Nob3A6SUNDUHJvZmlsZT4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDo4YTdmOGU5Yi1iOGQ3LTUxNDgtYjA4MS1mNWQxNjcyOGNmZGE8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiMzU2NWYzOC1hZGJjLTExZTctOGNjOC1lMzFhMTczNGZhMTY8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDo1MjBiYWE3MS1mNWM3LTVkNDAtYWMzYy01OTU2OGUzMTEwZTI8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NTIwYmFhNzEtZjVjNy01ZDQwLWFjM2MtNTk1NjhlMzExMGUyPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE3LTEwLTEwVDEzOjExOjE4KzA1OjMwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6OWRlOWI2ZDQtNGM1NS1kMTQyLTg4MzctZDdlMGVjNWRlZjFkPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE3LTEwLTEwVDEzOjE4OjQ2KzA1OjMwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjhhN2Y4ZTliLWI4ZDctNTE0OC1iMDgxLWY1ZDE2NzI4Y2ZkYTwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNy0xMC0xMFQxODo0Mjo1OSswNTozMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjMwMDAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjMwMDAwMDAvMTAwMDA8L3RpZmY6WVJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+NjI1PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjY1NDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+CqfeQwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAATm0lEQVR42uzdQXJiNxCAYZR6G27kU3EYn4obeaksUqnEk3jARk9Sd3/fLpXKDE/wpJ8GO633fgEAIJY/LAEAgIgDAEDEAQAg4gAARBwAACIOAAARBwAg4gAAEHEAAIg4AAARBwCAiAMAQMQBACDiAABEHAAAIg4AABEHACDiAAAQcQAAiDgAABEHAICIAwBAxAEAiDgAAEQcAAAiDgAAEQcAIOIAABBxAACIOAAAEQcAgIgDAEDEAQCIOAAARBwAACIOAEDEAQAg4gAAEHEAAIg4AAARBwCAiAMAQMQBAIg4AABEHAAAIg4AQMQBACDiAAAQcQAAIg4AABEHAICIAwBAxAEAiDgAAEQcAAAiDgBAxAEAIOIAABBxAAAiDgAAEQcAgIgDAEDEAQCIOAAARBwAACIOAEDEAQAg4gAAEHEAACIOAAARBwCAiAMAEHEAAIg4AABEHAAAIg4AQMQBACDiAAAQcQAAIg4AABEHAICIAwAQcQAAiDgAAEQcAICIAwBAxAEAIOIAABBxAAAiDgAAEQcAgIgDABBxAACIOAAARBwAgIgDAEDEAQAg4gAARBwAACIOAAARBwCAiAMAEHEAAKxxrH4AH+9vFde9P/j3zUsTAPZ1vd1FXPFY++5/J+7AHvGsZh1Cs98j4pJtRt0NDvaFhG8Gm5DzZh4RV2mT7m5osB8MeGy77CFCLvbzh4izWYs5sA8sfOyr95GWYD1FHSLOpi3mwB5QNuhM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';
                doc.setFont('courier');
                //CABECERA
                doc.setDrawColor(119, 136, 153);
                doc.rect(8, 10, 195, 70);
                doc.rect(8, 10, 95, 70);
                doc.addImage(imgData, 'JPEG', 155, 12, 42, 40);
                doc.setFontSize(11);
                doc.setFontType('bold');
                doc.text(105, 20, 'Cerca de la Huerta');
                doc.text(105, 40, '555-125-563');
                doc.text(105, 50, 'info@cercahuerta.com');
                doc.text(105, 30, 'CIF. D29892858');
                doc.setFontType('normal');
                doc.text(105, 62, 'Calle 11 Sector 2 PI Salper');
                doc.text(105, 72, 'Ciudad Nueva');

                doc.setFontSize(22);
                doc.setFontType('bold');
                doc.text(11, 23, 'Factura ' + $scope.id);
                doc.setFontSize(12);
                doc.setFontType('normal');
                doc.text(11, 40, 'Cliente: ' + usuario);
                doc.text(11, 50, 'DNI: ' + dni);
                doc.text(11, 60, 'Fecha: ' + fecha);


                doc.rect(8, 80, 195, 210);
                doc.setFontSize(13);
                doc.text(12, 90, 'Codigo');
                doc.text(50, 90, 'Nombre');
                doc.text(125, 90, 'Cantidad');
                doc.text(170, 90, 'Precio');
                doc.setFillColor(119, 136, 153);
                //doc.rect(9, 93, 193, 3, 'F');
                doc.roundedRect(9, 93, 193, 2, 3, 3, 'FD');
                doc.setFontSize(13);

                //LINEAS DE LA FACTURA
                var linea = 107;
                var precio = 0;
                var cantidad = 0;
                for (var x = 0; x <= lineasTotales - 1; x++) {
                    if (x % 14 === 0 && x !== 0) {
                        doc.addPage('a4', 1);
                        //CABECERA
                        doc.rect(8, 10, 195, 70);
                        doc.rect(8, 10, 95, 70);
                        doc.addImage(imgData, 'JPEG', 155, 12, 42, 40);
                        doc.setFontSize(11);
                        doc.setFontType('bold');
                        doc.text(105, 20, 'Cerca de la Huerta');
                        doc.text(105, 40, 'Tel. 555-125-563');
                        doc.text(105, 50, 'Email: info@cercahuerta.com');
                        doc.text(105, 30, 'CIF. D29892858');
                        doc.setFontType('normal');
                        doc.text(105, 62, 'Direccion: Calle 11 Sector 2 PI Salper');
                        doc.text(105, 72, 'Ciudad Nueva');


                        doc.setFontSize(22);
                        doc.setFontType('bold');
                        doc.text(11, 23, 'Factura ' + $scope.id);
                        doc.setFontSize(12);
                        doc.setFontType('normal');
                        doc.text(11, 40, 'Cliente: ' + usuario);
                        doc.text(11, 50, 'DNI: ');
                        doc.text(11, 60, 'Fecha: ' + fecha);

                        doc.rect(8, 80, 195, 210);
                        doc.setFontSize(13);
                        doc.text(12, 90, 'Codigo');
                        doc.text(50, 90, 'Nombre');
                        doc.text(125, 90, 'Cantidad');
                        doc.text(170, 90, 'Precio');
                        doc.setFillColor(119, 136, 153);
                        //doc.rect(9, 93, 193, 3, 'F');
                        doc.roundedRect(9, 93, 193, 2, 3, 3, 'FD');
                        doc.setFontSize(13);
                        linea = 107;
                    }
                    doc.text(12, linea, $scope.ajaxLineasFactura[x].obj_Producto.codigo);
                    doc.text(50, linea, $scope.ajaxLineasFactura[x].obj_Producto.nombre);
                    doc.text(125, linea, ($scope.ajaxLineasFactura[x].cantidad).toString());
                    doc.text(170, linea, (parseFloat(($scope.ajaxLineasFactura[x].obj_Producto.precio)).toFixed(2).toString()));
                    linea = linea + 13;
                    precio = (precio + $scope.ajaxLineasFactura[x].obj_Producto.precio);
                    cantidad = cantidad + $scope.ajaxLineasFactura[x].cantidad;
                }

                //FOOTER DE FACTURA
                doc.setFillColor(119, 136, 153);
                //doc.rect(9, 260, 193, 5, 'F');
                doc.roundedRect(9, 260, 193, 2, 3, 3, 'FD');
                doc.text(12, 273, 'Cantidad Total');
                doc.text(70, 273, 'Precio');
                doc.text(115, 273, 'IVA');
                doc.text(150, 273, 'Precio Total()');

                doc.text(23, 285, cantidad.toString());
                doc.text(70, 285, (precio.toFixed(2).toString()));
                doc.text(115, 285, (precio * (iva / 100)).toFixed(2).toString());
                doc.text(158, 285, (precio * (iva / 100 + 1)).toFixed(2).toString());

                doc.output('save', 'Factura-' + $scope.id + '.pdf'); //Try to save PDF as a file (not works on ie before 10, and some mobile devices)
//                doc.output('datauristring');        //returns the data uri string
//                doc.output('datauri');              //opens the data uri in current window
//                doc.output('dataurlnewwindow');     //opens the data uri in new window
            }, function (response) {
                $scope.status = response.status;
                $scope.ajaxLineasFactura = response.data.message || 'Request failed';
            });





        };

        $scope.isActive = toolService.isActive;



    }
]);